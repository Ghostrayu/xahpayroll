# XAH PAYROLL - WEB APP

## OVERVIEW

XAH PAYROLL IS A DECENTRALIZED PAYROLL MANAGEMENT SYSTEM THAT ENABLES HOURLY WAGE PAYMENTS THROUGH XAH MICROTRANSACTIONS. THE SYSTEM USES PAYMENT CHANNEL HOOKS TO VERIFY NGO INPUTS, MANAGES ESCROWED XAH FUNDS, AND AUTOMATICALLY DISTRIBUTES HOURLY PAYMENTS WITH BUILT-IN TIMEOUT MECHANISMS.

## CORE FEATURES

### üïê HOURLY PAYMENT DISTRIBUTION
- **AUTOMATED HOURLY PAYOUTS**: WORKERS RECEIVE XAH PAYMENTS AUTOMATICALLY EVERY HOUR BASED ON LOGGED WORK TIME
- **MICROTRANSACTION EFFICIENCY**: LEVERAGES XAH PAYMENT CHANNELS FOR LOW-COST, HIGH-FREQUENCY PAYMENTS
- **REAL-TIME TRACKING**: LIVE MONITORING OF HOURS LOGGED AND PAYMENTS PROCESSED

### üîê PAYMENT CHANNEL HOOKS
- **NGO INPUT VERIFICATION**: CRYPTOGRAPHIC VERIFICATION OF EMPLOYER/NGO INPUTS BEFORE PAYMENT PROCESSING
- **HOOK-BASED VALIDATION**: SMART CONTRACT HOOKS VALIDATE WORK LOGS AND PAYMENT CONDITIONS
- **TAMPER-PROOF RECORDS**: IMMUTABLE ON-CHAIN VERIFICATION OF ALL TRANSACTIONS

### üí∞ ESCROW MANAGEMENT
- **SECURE FUND HOLDING**: EMPLOYER FUNDS HELD IN ESCROW UNTIL HOURLY PAYMENT CONDITIONS ARE MET
- **AUTOMATED RELEASE**: PAYMENTS AUTOMATICALLY RELEASED FROM ESCROW ON HOURLY INTERVALS
- **BALANCE MONITORING**: REAL-TIME ESCROW BALANCE TRACKING AND LOW-BALANCE ALERTS

### ‚è±Ô∏è AUTOMATED TIMEOUT SYSTEM
- **INACTIVITY DETECTION**: AUTOMATIC TIMEOUT WHEN WORKERS STOP LOGGING HOURS
- **GRACE PERIODS**: CONFIGURABLE TIMEOUT THRESHOLDS BEFORE PAYMENT SUSPENSION
- **SESSION MANAGEMENT**: CLEAN SESSION TERMINATION AND ESCROW FUND RETURN ON TIMEOUT

## TECHNICAL ARCHITECTURE

### PAYMENT FLOW
```
1. NGO/EMPLOYER DEPOSITS XAH INTO ESCROW
2. WORKER STARTS LOGGING HOURS VIA WEB INTERFACE
3. PAYMENT CHANNEL HOOK VERIFIES WORKER ACTIVITY
4. HOURLY TIMER TRIGGERS PAYMENT RELEASE
5. XAH TRANSFERRED FROM ESCROW TO WORKER WALLET
6. TIMEOUT MONITOR CHECKS FOR INACTIVITY
7. SESSION ENDS ON TIMEOUT OR MANUAL STOP
```

### TECHNOLOGY STACK
- **BLOCKCHAIN**: XAH LEDGER (XRPL)
- **SMART CONTRACTS**: PAYMENT CHANNEL HOOKS
- **FRONTEND**: REACT.JS WITH WEB3 INTEGRATION
- **BACKEND**: NODE.JS WITH XRPL SDK
- **DATABASE**: POSTGRESQL FOR OFF-CHAIN RECORDS
- **AUTHENTICATION**: WALLET-BASED AUTHENTICATION

## KEY COMPONENTS

### 1. WORKER INTERFACE
- CLOCK IN/OUT FUNCTIONALITY
- REAL-TIME HOURS TRACKER
- PAYMENT HISTORY DASHBOARD
- WALLET CONNECTION AND BALANCE DISPLAY

### 2. EMPLOYER/NGO DASHBOARD
- WORKER MANAGEMENT
- ESCROW FUNDING INTERFACE
- PAYMENT ANALYTICS AND REPORTS
- HOOK CONFIGURATION PANEL

### 3. PAYMENT CHANNEL SYSTEM
- MULTI-SIGNATURE PAYMENT CHANNELS
- HOOK-BASED VALIDATION LOGIC
- AUTOMATIC SETTLEMENT ON TIMEOUT
- CHANNEL STATE MANAGEMENT

### 4. VERIFICATION HOOKS
- **INPUT VALIDATION HOOK**: VERIFIES NGO AUTHORIZATION SIGNATURES
- **TIME VERIFICATION HOOK**: VALIDATES WORK HOUR SUBMISSIONS
- **PAYMENT AUTHORIZATION HOOK**: CONFIRMS ESCROW AVAILABILITY BEFORE RELEASE
- **TIMEOUT HOOK**: TRIGGERS AUTOMATIC SESSION TERMINATION

## SECURITY FEATURES

- **MULTI-SIGNATURE ESCROW**: REQUIRES BOTH EMPLOYER AND SYSTEM SIGNATURES FOR FUND MANAGEMENT
- **RATE LIMITING**: PREVENTS SPAM AND FRAUDULENT HOUR LOGGING
- **AUDIT TRAIL**: COMPLETE TRANSACTION HISTORY ON-CHAIN
- **ENCRYPTED COMMUNICATIONS**: ALL API CALLS SECURED WITH TLS
- **WALLET SECURITY**: NON-CUSTODIAL DESIGN - USERS MAINTAIN CONTROL OF PRIVATE KEYS

## SETUP & INSTALLATION

### PREREQUISITES
```bash
- NODE.JS V18+
- POSTGRESQL 14+
- XRPL TESTNET/MAINNET ACCESS
- WEB3 WALLET (E.G., XUMM, CROSSMARK)
```

### INSTALLATION
```bash
# CLONE REPOSITORY
GIT CLONE HTTPS://GITHUB.COM/YOUR-ORG/XAH-PAYROLL.GIT
CD XAH-PAYROLL

# INSTALL DEPENDENCIES
NPM INSTALL

# CONFIGURE ENVIRONMENT
CP .ENV.EXAMPLE .ENV
# EDIT .ENV WITH YOUR XRPL CREDENTIALS AND DATABASE SETTINGS

# RUN DATABASE MIGRATIONS
NPM RUN MIGRATE

# START DEVELOPMENT SERVER
NPM RUN DEV
```

### ENVIRONMENT VARIABLES
```env
XRPL_NETWORK=TESTNET
XRPL_WEBHOOK_URL=YOUR_WEBHOOK_URL
DATABASE_URL=POSTGRESQL://USER:PASSWORD@LOCALHOST:5432/XAHPAYROLL
ESCROW_WALLET_SEED=YOUR_ESCROW_WALLET_SEED
PAYMENT_INTERVAL_MINUTES=60
TIMEOUT_THRESHOLD_MINUTES=15
```

## USAGE

### FOR WORKERS
1. CONNECT YOUR XAH WALLET TO THE PLATFORM
2. CLICK "START SHIFT" TO BEGIN LOGGING HOURS
3. WORK IS AUTOMATICALLY TRACKED AND VERIFIED VIA HOOKS
4. RECEIVE XAH PAYMENTS EVERY HOUR TO YOUR WALLET
5. CLICK "END SHIFT" WHEN DONE, OR AUTOMATIC TIMEOUT AFTER INACTIVITY

### FOR EMPLOYERS/NGOS
1. CREATE AN EMPLOYER ACCOUNT AND VERIFY CREDENTIALS
2. ADD WORKERS TO YOUR ORGANIZATION
3. FUND THE ESCROW WALLET WITH XAH
4. CONFIGURE HOURLY RATES FOR EACH WORKER
5. MONITOR REAL-TIME PAYMENT ACTIVITY AND ESCROW BALANCE
6. REVIEW PAYMENT REPORTS AND ANALYTICS

## PAYMENT CHANNEL CONFIGURATION

### CREATING A PAYMENT CHANNEL
```javascript
CONST PAYMENTCHANNEL = AWAIT XRPL.CREATEPAYMENTCHANNEL({
  ACCOUNT: EMPLOYERWALLET,
  DESTINATION: WORKERWALLET,
  AMOUNT: ESCROWAMOUNT,
  SETTLEDELAY: 3600, // 1 HOUR IN SECONDS
  PUBLICKEY: HOOKPUBLICKEY
});
```

### HOOK VERIFICATION LOGIC
```javascript
// PSEUDO-CODE FOR NGO INPUT VERIFICATION HOOK
FUNCTION VERIFYNGOINPUT(TRANSACTION) {
  CONST NGOSIGNATURE = TRANSACTION.MEMOS.NGOSIGNATURE;
  CONST ISVALID = CRYPTOVERIFY(NGOSIGNATURE, NGOPUBLICKEY);
  
  IF (!ISVALID) {
    RETURN HOOK_REJECT;
  }
  
  RETURN HOOK_ACCEPT;
}
```

## TIMEOUT MECHANISM

### AUTOMATIC TIMEOUT FLOW
- **INACTIVITY THRESHOLD**: 15 MINUTES (CONFIGURABLE)
- **WARNING**: USER RECEIVES NOTIFICATION AT 10 MINUTES OF INACTIVITY
- **TIMEOUT ACTION**: SESSION TERMINATED, FINAL PAYMENT CALCULATED AND RELEASED
- **ESCROW RETURN**: UNUSED ESCROW FUNDS RETURNED TO EMPLOYER

### MANUAL OVERRIDE
EMPLOYERS CAN MANUALLY END SESSIONS OR ADJUST TIMEOUT SETTINGS PER WORKER.

## API ENDPOINTS

### WORKER ENDPOINTS
- `POST /API/WORKER/CLOCK-IN` - START LOGGING HOURS
- `POST /API/WORKER/CLOCK-OUT` - STOP LOGGING HOURS
- `GET /API/WORKER/HOURS` - GET CURRENT SESSION HOURS
- `GET /API/WORKER/PAYMENTS` - PAYMENT HISTORY

### EMPLOYER ENDPOINTS
- `POST /API/EMPLOYER/FUND-ESCROW` - ADD FUNDS TO ESCROW
- `GET /API/EMPLOYER/WORKERS` - LIST ALL WORKERS
- `POST /API/EMPLOYER/SET-RATE` - SET HOURLY RATE FOR WORKER
- `GET /API/EMPLOYER/ANALYTICS` - PAYMENT ANALYTICS

### HOOK ENDPOINTS
- `POST /API/HOOKS/VERIFY-INPUT` - VERIFY NGO INPUT SIGNATURE
- `POST /API/HOOKS/VALIDATE-TIME` - VALIDATE WORK HOURS
- `POST /API/HOOKS/CHECK-TIMEOUT` - CHECK FOR SESSION TIMEOUT

## ROADMAP

- [ ] MULTI-CURRENCY SUPPORT (XRP, USD STABLECOINS)
- [ ] MOBILE APP (IOS/ANDROID)
- [ ] BIOMETRIC VERIFICATION FOR CLOCK IN/OUT
- [ ] INTEGRATION WITH TRADITIONAL PAYROLL SYSTEMS
- [ ] ADVANCED ANALYTICS AND REPORTING
- [ ] DAO GOVERNANCE FOR PLATFORM PARAMETERS
- [ ] MULTI-CHAIN SUPPORT (ETHEREUM, POLYGON)

## SECURITY

### ‚ö†Ô∏è IMPORTANT SECURITY NOTES

**NEVER COMMIT SENSITIVE DATA TO VERSION CONTROL:**
- Database passwords
- API keys
- Private keys or wallet secrets
- `.env` files with real credentials

**BEFORE DEPLOYING:**

1. **Change Default Passwords**
   - The `setup_database.sql` file contains a placeholder password `CHANGE_THIS_PASSWORD`
   - Generate a strong password: `openssl rand -base64 32`
   - Update the password in the SQL script before running
   - Store the password securely (password manager, environment variables)

2. **Environment Variables**
   - Copy `backend/.env.example` to `backend/.env`
   - Fill in all required values with your actual credentials
   - Never commit the `.env` file to git (already in `.gitignore`)

3. **Database Security**
   - Use different passwords for development, staging, and production
   - Enable SSL connections for production databases
   - Restrict database access by IP address
   - Regularly update and rotate credentials

4. **Wallet Security**
   - Never store private keys in code or environment variables
   - Use hardware wallets or secure key management services
   - Test with testnet wallets before using real funds

**REPORTING SECURITY ISSUES:**
- Email: security@xahpayroll.io
- Do NOT open public issues for security vulnerabilities

## CONTRIBUTING

WE WELCOME CONTRIBUTIONS! PLEASE SEE [CONTRIBUTING.MD](CONTRIBUTING.MD) FOR GUIDELINES.

## LICENSE

MIT LICENSE - SEE [LICENSE](LICENSE) FILE FOR DETAILS

## SUPPORT

- **DOCUMENTATION**: [DOCS.XAHPAYROLL.IO](HTTPS://DOCS.XAHPAYROLL.IO)
- **DISCORD**: [DISCORD.GG/XAHPAYROLL](HTTPS://DISCORD.GG/XAHPAYROLL)
- **EMAIL**: SUPPORT@XAHPAYROLL.IO
- **ISSUES**: [GITHUB ISSUES](HTTPS://GITHUB.COM/YOUR-ORG/XAH-PAYROLL/ISSUES)

## ACKNOWLEDGMENTS

BUILT ON THE XRP LEDGER (XRPL) WITH SUPPORT FROM THE XRPL DEVELOPER COMMUNITY.

---

**DISCLAIMER**: THIS IS EXPERIMENTAL SOFTWARE. ALWAYS TEST THOROUGHLY ON TESTNET BEFORE DEPLOYING TO MAINNET. NOT FINANCIAL ADVICE.
